diff --git a/hls-plugin-api/src/Ide/Types.hs b/hls-plugin-api/src/Ide/Types.hs
index c32b7173..0ff057b1 100644
--- a/hls-plugin-api/src/Ide/Types.hs
+++ b/hls-plugin-api/src/Ide/Types.hs
@@ -179,7 +179,7 @@ instance Default Config where
   def = Config
     { checkParents                = CheckOnSave
     , checkProject                = True
-    , formattingProvider          = "ormolu"
+    , formattingProvider          = "fourmolu"
     -- , formattingProvider          = "floskell"
     -- , formattingProvider          = "stylish-haskell"
     , cabalFormattingProvider     = "cabal-fmt"
diff --git a/stack.yaml b/stack.yaml
index c28042b4..f77dbd44 100644
--- a/stack.yaml
+++ b/stack.yaml
@@ -1,4 +1,4 @@
-resolver: nightly-2022-08-15
+resolver: lts-21.0
 
 packages:
 - .
@@ -20,10 +20,10 @@ packages:
 - ./plugins/hls-refine-imports-plugin
 - ./plugins/hls-hlint-plugin
 - ./plugins/hls-rename-plugin
-# - ./plugins/hls-retrie-plugin
-# - ./plugins/hls-splice-plugin
-# - ./plugins/hls-tactics-plugin
-- ./plugins/hls-stylish-haskell-plugin
+- ./plugins/hls-retrie-plugin
+- ./plugins/hls-splice-plugin
+#- ./plugins/hls-tactics-plugin
+#- ./plugins/hls-stylish-haskell-plugin
 - ./plugins/hls-floskell-plugin
 - ./plugins/hls-fourmolu-plugin
 - ./plugins/hls-pragmas-plugin
@@ -42,17 +42,31 @@ extra-deps:
 # needed for tests of hls-cabal-fmt-plugin
 - cabal-fmt-0.1.6@sha256:54041d50c8148c32d1e0a67aef7edeebac50ae33571bef22312f6815908eac19,3626
 - floskell-0.10.6@sha256:e77d194189e8540abe2ace2c7cb8efafc747ca35881a2fefcbd2d40a1292e036,3819
+- algebraic-graphs-0.6.1
 - hiedb-0.4.3.0
 - implicit-hie-0.1.2.7@sha256:82bbbb1a8c05f99c8af3c16ac53e80c8648d8bf047b25ed5ce45a135bd736907,3122
 - implicit-hie-cradle-0.5.0.0@sha256:4276f60f3a59bc22df03fd918f73bca9f777de9568f85e3a8be8bd7566234a59,2368
 - monad-dijkstra-0.1.1.3@sha256:d2fc098d7c122555e726830a12ae0423ac187f89de9228f32e56e2f6fc2238e1,1900
-- retrie-1.2.0.1
+- retrie-1.2.2
 - co-log-core-0.3.1.0
 - lsp-2.0.0.0
 - lsp-types-2.0.0.1
 - lsp-test-0.15.0.0
 - hie-bios-0.12.0
 - row-types-1.0.1.2
+- hlint-3.5
+- fourmolu-0.10.1.0
+# fourmolu
+- ormolu-0.5.1.0
+- Cabal-syntax-3.8.1.0
+- Cabal-3.8.1.0
+- ghc-lib-parser-9.4.4.20221225
+# ormolu
+- text-2.0.1
+- parsec-3.1.16.1
+- ghc-lib-parser-ex-9.4.0.0
+# tactics plugin
+#- refinery-0.4.0.0
 
 # currently needed for ghcide>extra, etc.
 allow-newer: true
@@ -74,8 +88,9 @@ flags:
 
     ignore-plugins-ghc-bounds: true
     haddockComments: false
-    retrie: false
-    splice: false
+    retrie: true
+    stylishHaskell: false
+    splice: true
     tactic: false
 
   retrie:
@@ -86,8 +101,6 @@ flags:
     auto: false
   hlint:
     ghc-lib: true
-  stylish-haskell:
-    ghc-lib: true
   hyphenation:
     embed: true
 
@@ -96,4 +109,4 @@ nix:
 
 concurrent-tests: false
 
-system-ghc: true
+#system-ghc: true
